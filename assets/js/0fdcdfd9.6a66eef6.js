"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[790],{1308:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var a=n(7896),r=n(1461),o=(n(2784),n(876)),i=["components"],s={sidebar_position:3},l="Generated Types",c={unversionedId:"basic-tutorial/js-ts/generated-types",id:"basic-tutorial/js-ts/generated-types",isDocsHomePage:!1,title:"Generated Types",description:"The approach presented in the Handle Translations section is certainly straightforward and instantly enables the use of type-safety.",source:"@site/docs/basic-tutorial/js-ts/generated-types.md",sourceDirName:"basic-tutorial/js-ts",slug:"/basic-tutorial/js-ts/generated-types",permalink:"/text-localizer/docs/basic-tutorial/js-ts/generated-types",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/basic-tutorial/js-ts/generated-types.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Handle Translations",permalink:"/text-localizer/docs/basic-tutorial/js-ts/handle-translations"},next:{title:"Cached Translations",permalink:"/text-localizer/docs/basic-tutorial/js-ts/cached-translations"}},u=[],p={toc:u};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"generated-types"},"Generated Types"),(0,o.kt)("p",null,"The approach presented in the Handle Translations section is certainly straightforward and instantly enables the use of type-safety.\nHowever, it has some limitations that can be optionally overcome by choosing to generate types.\nThe limitations to be overcome are:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"There is no type-safety on types obtained from server-side translations;"),(0,o.kt)("li",{parentName:"ul"},"There is no type-safety in the formatTranslation function.")),(0,o.kt)("p",null,'You can therefore decide to generate all the types you need using the "generate-l10n" script in this way:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"yarn generate-l10n [translationsPath]\n")),(0,o.kt)("p",null,"Where translationsPath is the path where all the translation files are located. For example, assuming all translations are located in the src/l10n folder, the script would be run as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"yarn generate-l10n src/l10n\n")),(0,o.kt)("p",null,"Execution of this script will result in the definition of a declarations typescript file called: 'translations.d.ts'. And it will have the following structure."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="/src/l10n/translations.d.ts"',title:'"/src/l10n/translations.d.ts"'},"/*\n * GENERATED CODE - DO NOT MODIFY BY HAND\n */\n\n/* eslint-disable */\n\ntype en = import('text-localizer').TranslationsParser<{\n  /**\n   * @en Welcome on the Text Localizer Docs\n   */\n  welcome: 'Welcome on the Text Localizer Docs';\n  /**\n   * @en Do you need some help about {{ topic }}?\n   */\n  help: 'Do you need some help about {{ topic }}?';\n  /**\n   * @en Which is your favourite cat?\n   */\n  question: 'Which is your favourite cat?';\n}>;\n\ntype it = import('text-localizer').TranslationsParser<{\n  /**\n   * @it Benvenuto sulla documentazione di Text Localizer\n   */\n  welcome: 'Benvenuto sulla documentazione di Text Localizer';\n  /**\n   * @it Hai bisogno di aiuto riguardo {{ topic }}?\n   */\n  help: 'Hai bisogno di aiuto riguardo {{ topic }}?';\n  /**\n   * @it Qual \xe8 il tuo gatto preferito?\n   */\n  question: 'Qual \xe8 il tuo gatto preferito?';\n}>;\n\ntype us = import('text-localizer').TranslationsParser<{\n  /**\n   * @us Welcome on the Text Localizer Docs\n   */\n  welcome: 'Welcome on the Text Localizer Docs';\n  /**\n   * @us Do you need some help about {{ topic }}?\n   */\n  help: 'Do you need some help about {{ topic }}?';\n  /**\n   * @us Which is your favorite cat?\n   */\n  question: 'Which is your favorite cat?';\n}>;\n\ntype AppTranslations = en | it | us;\n\ntype Languages = 'en' | 'it' | 'us';\n")),(0,o.kt)("p",null,"What is really important in this file is the declaration of two types:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Languages;"),(0,o.kt)("li",{parentName:"ul"},"AppTranslations.")),(0,o.kt)("p",null,"These two types will simply have to be added at the creation stage of the TextLocalizer as generics.\nFor the sake of clarity, taking the previous code, the result will be this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { TextLocalizer } from 'text-localizer';\nimport { fetchItTranslations } from './l10n/it';\n\n(async () => {\n  const localizer = new TextLocalizer<Languages, AppTranslations>({\n    us: import('./l10n/us.json'),\n    en: import('./l10n/en'),\n    it: fetchItTranslations,\n  });\n\n  await localizer.setOptions({\n    language: 'en',\n  });\n\n  const translations = localizer.translations;\n\n  console.log(translations.question); // \"Which is your favourite cat?\"\n\n  console.log(\n    localizer.formatTranslation(translations.help, { topic: 'Text Localizer' })\n  );\n})();\n")),(0,o.kt)("p",null,"The advantages?"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Server-side translations are truly type-safe;"),(0,o.kt)("li",{parentName:"ul"},"The object passed into formatTranslation will give a compile-time error if it does not conform to the actual object requested;"),(0,o.kt)("li",{parentName:"ul"},"All translation strings will have a docs.")))}d.isMDXComponent=!0},876:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var a=n(2784);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),f=r,m=d["".concat(l,".").concat(f)]||d[f]||p[f]||o;return n?a.createElement(m,i(i({ref:t},u),{},{components:n})):a.createElement(m,i({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);