"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[227],{2844:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return m}});var a=n(7896),r=n(1461),o=(n(2784),n(876)),i=["components"],s={sidebar_position:3},l="Generated Types",c={unversionedId:"basic-tutorial/js-ts/more/generated-types",id:"basic-tutorial/js-ts/more/generated-types",isDocsHomePage:!1,title:"Generated Types",description:"The approach presented in the Usage section is certainly straightforward and instantly enables the use of type-safety.",source:"@site/docs/basic-tutorial/js-ts/more/generated-types.md",sourceDirName:"basic-tutorial/js-ts/more",slug:"/basic-tutorial/js-ts/more/generated-types",permalink:"/text-localizer/docs/basic-tutorial/js-ts/more/generated-types",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/basic-tutorial/js-ts/more/generated-types.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Usage",permalink:"/text-localizer/docs/basic-tutorial/js-ts/usage"},next:{title:"Cached Translations",permalink:"/text-localizer/docs/basic-tutorial/js-ts/more/cached-translations"}},p=[],u={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"generated-types"},"Generated Types"),(0,o.kt)("p",null,"The approach presented in the Usage section is certainly straightforward and instantly enables the use of type-safety.\nHowever, it has some limitations that can be optionally overcome by choosing to generate types.\nThe limitations are:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"There is no type-safety on types obtained from server-side translations;"),(0,o.kt)("li",{parentName:"ul"},"There is no type-safety in the formatTranslation function.")),(0,o.kt)("p",null,"You can decide to generate all the types you need using the ",(0,o.kt)("em",{parentName:"p"},'"generate-l10n"')," script in this way:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm run generate-l10n [translationsPath]\n")),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If the script fails, make sure that the ",(0,o.kt)("strong",{parentName:"p"},'"module"')," specified in the ",(0,o.kt)("strong",{parentName:"p"},"tsconfig.json")," file is ",(0,o.kt)("strong",{parentName:"p"},'"CommonJS"')," (at least while the script is running)."))),(0,o.kt)("p",null,"Where translationsPath is the path where all the translation files are located. For example, assuming all translations are located in the ",(0,o.kt)("em",{parentName:"p"},"src/l10n")," folder, the script would be run as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm generate-l10n src/l10n\n")),(0,o.kt)("p",null,"Execution of this script will result in the definition of a declarations typescript file called: ",(0,o.kt)("em",{parentName:"p"},"'translations.d.ts'"),". And it will have the following structure."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/l10n/translations.d.ts"',title:'"src/l10n/translations.d.ts"'},"/*\n * GENERATED CODE - DO NOT MODIFY BY HAND\n */\n\n/* eslint-disable */\n\ntype uk = import('text-localizer').TranslationsParser<{\n  /**\n   * @uk Welcome on the Text Localizer Docs\n   */\n  welcome: 'Welcome on the Text Localizer Docs';\n  /**\n   * @uk Do you need some help about {{ topic }}?\n   */\n  help: 'Do you need some help about {{ topic }}?';\n  /**\n   * @uk Which is your favourite cat?\n   */\n  question: 'Which is your favourite cat?';\n}>;\n\ntype it = import('text-localizer').TranslationsParser<{\n  /**\n   * @it Benvenuto sulla documentazione di Text Localizer\n   */\n  welcome: 'Benvenuto sulla documentazione di Text Localizer';\n  /**\n   * @it Hai bisogno di aiuto riguardo {{ topic }}?\n   */\n  help: 'Hai bisogno di aiuto riguardo {{ topic }}?';\n  /**\n   * @it Qual \xe8 il tuo gatto preferito?\n   */\n  question: 'Qual \xe8 il tuo gatto preferito?';\n}>;\n\ntype us = import('text-localizer').TranslationsParser<{\n  /**\n   * @us Welcome on the Text Localizer Docs\n   */\n  welcome: 'Welcome on the Text Localizer Docs';\n  /**\n   * @us Do you need some help about {{ topic }}?\n   */\n  help: 'Do you need some help about {{ topic }}?';\n  /**\n   * @us Which is your favorite cat?\n   */\n  question: 'Which is your favorite cat?';\n}>;\n\ntype AppTranslations = uk | it | us;\n\ntype Languages = 'uk' | 'it' | 'us';\n")),(0,o.kt)("p",null,"What is really important in this file is the declaration of two types:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Languages;"),(0,o.kt)("li",{parentName:"ul"},"AppTranslations.")),(0,o.kt)("p",null,"These two types will simply have to be added at the creation stage of the TextLocalizer as generics.\nFor the sake of clarity, taking the previous code, the result will be this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/index.ts"',title:'"src/index.ts"'},"import { TextLocalizer } from 'text-localizer';\nimport { fetchItTranslations } from './l10n/it';\n\n(async () => {\n  const localizer = new TextLocalizer<Languages, AppTranslations>({\n    us: import('./l10n/us.json'),\n    uk: import('./l10n/uk'),\n    it: fetchItTranslations,\n  });\n\n  await localizer.setOptions({\n    language: 'uk',\n  });\n\n  const translations = localizer.translations;\n\n  console.log(translations.question); // \"Which is your favourite cat?\"\n\n  console.log(\n    localizer.formatTranslation(translations.help, { topic: 'Text Localizer' })\n  );\n})();\n")),(0,o.kt)("p",null,"The advantages?"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Server-side translations are truly type-safe;"),(0,o.kt)("li",{parentName:"ul"},"The object passed into ",(0,o.kt)("a",{parentName:"li",href:"/docs/api-reference/text-localizer#formattranslation"},"formatTranslation")," will give a compile-time error if it does not conform to the actual object requested;"),(0,o.kt)("li",{parentName:"ul"},"All translation strings will have a docs.")))}m.isMDXComponent=!0},876:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(2784);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(n),d=r,h=m["".concat(l,".").concat(d)]||m[d]||u[d]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);